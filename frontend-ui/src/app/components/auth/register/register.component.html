<div class="register-wrapper">
  <div 
    class="register-card" 
    [@cardAnimation]
    [@fieldAnimation]
  >
    <h2>Create Your Account</h2>

    <form #formRef="ngForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <input
          #firstnameInput
          type="text"
          name="firstname"
          [(ngModel)]="request.firstname"
          placeholder="First Name"
          required
          [@inputState]="inputStates['firstname']"
          (blur)="onInputBlur('firstname', request.firstname)"
        />
        <span class="validation-icon" *ngIf="inputStates['firstname'] === 'valid'">✓</span>
      </div>

      <div class="form-group">
        <input
          #lastnameInput
          type="text"
          name="lastname"
          [(ngModel)]="request.lastname"
          placeholder="Last Name"
          required
          [@inputState]="inputStates['lastname']"
          (blur)="onInputBlur('lastname', request.lastname)"
        />
        <span class="validation-icon" *ngIf="inputStates['lastname'] === 'valid'">✓</span>
      </div>

      <div class="form-group">
        <input
          #emailInput
          type="email"
          name="email"
          [(ngModel)]="request.email"
          placeholder="Email Address"
          required
          [@inputState]="inputStates['email']"
          (blur)="onInputBlur('email', request.email)"
        />
        <span class="validation-icon" *ngIf="inputStates['email'] === 'valid'">✓</span>
      </div>

      <div class="form-group">
        <input
          #passwordInput
          type="password"
          name="password"
          [(ngModel)]="request.password"
          placeholder="Password"
          required
          [@inputState]="inputStates['password']"
          (blur)="onInputBlur('password', request.password)"
          (input)="onPasswordInput()"
        />
        <span class="validation-icon" *ngIf="inputStates['password'] === 'valid'">✓</span>
        
        <!-- Password Strength Indicator -->
        <div class="password-strength" *ngIf="request.password">
          <div class="strength-bar">
            <div 
              class="strength-fill" 
              [style.width.%]="passwordStrength.value"
              [style.background]="passwordStrength.color"
            ></div>
          </div>
          <div class="strength-label" [style.color]="passwordStrength.color">
            {{ passwordStrength.label }}
          </div>
        </div>
      </div>

      <button
        type="submit"
        class="btn"
        [disabled]="!formRef.form.valid || loading"
        [@buttonState]="buttonState"
        [attr.aria-busy]="loading"
      >
        <span *ngIf="!loading">Register</span>
        <span *ngIf="loading" class="spinner"></span>
      </button>

      <div 
        *ngIf="successMessage" 
        class="message success" 
        @messageAnimation
      >
        {{ successMessage }}
      </div>
      <div 
        *ngIf="errorMessage" 
        class="message error" 
        @messageAnimation
      >
        {{ errorMessage }}
      </div>
    </form>
  </div>
</div>